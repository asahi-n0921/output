webpackJsonp(["ondemand.InlinePlayer"],{"2h9/":function(t,e){for(var i=[],n=0;n<256;++n)i[n]=(n+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,a=i;return[a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],"-",a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]],a[t[n++]]].join("")}},"2kMG":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,a,s,r,o,c=i("lt8z"),l=i.n(c),u=i("Z8+c"),d=i.n(u),_=(i("n12u"),i("WpTh"),i("86MP")),h=i.n(_),E=i("M1I4"),p=i.n(E),T=i("fKPv"),v=i.n(T),y=i("GiK3"),f=i("Z1LJ"),m=i("bndy"),g=i("QRO9"),P=i("7t5w"),I=i("5H6f"),V=i("y7g/"),b=i("JSXd"),A=i("PKYm"),N=Object(m.createSelector)(I.c,V.f,function(t,e){var i=e.source&&e.source.videoId;return i&&"tweet"===i.type?b.a.createHydratorForTweet(i.id)(t):null},function(t,e,i){return{dataSaverMode:t,language:e,mediaAvailability:i&&Object(A.a)(i)||void 0,publisherId:i?Object(A.b)(i):void 0}}),S={getTwitterAuthedHttpClient:function(){return function(t,e,i){return i.api.getHttpClient()}},logPromotedVideoEvent:g.b,scribeAction:P.c},C=Object(f.e)(N,S),M=i("bgPG"),w=i("3f1i"),L=i("jH3T"),R=i.n(L),O=i("KSGD"),k=i("sAt4"),D=i("lmuO"),W=i("jYKd"),F=i.n(W),B=i("MjES"),H=i.n(B),U=function(t){t.preventDefault(),t.stopPropagation()},K=function(t){var e=t.children;return y.createElement(H.a,{onClick:U,style:F.a.absoluteFill},e)},Y=i("+doE"),x=i.n(Y),G=i("uVF/"),j=i.n(G),q=i("mDUa"),z=i.n(q),Q=(i("SjVU"),i("GWfl")),X=i.n(Q),J=function(){function t(t,e,i){this.placement=t,this.obstructions=e,this.layerId=i}var e=t.prototype;return e.getPositionData=function(){return{percentVisible:this.visibleFraction(),percentOfViewportOccupied:this.placement.viewportOccupiedFraction(),sizesInfo:{viewportSize:this.placement.viewport,mediaSize:this.placement.item}}},e.visibleFraction=function(){var t=this.placement.visiblePart();if(!t)return 0;var e=z()(this.layerId)?this.obstructions.getObstructionAboveLayer(this.layerId,t):this.obstructions.getTotalObstruction(t),i=X.a.area(this.placement.item),n=(1-e)*X.a.area(t);return i>0?n/i:0},e.top=function(){return this.placement.item.top},e.distanceToCenter=function(){return this.placement.verticalDistanceToViewportCenter()},t}(),Z=i("swE+"),$=i("7q6/"),tt=(i("+CM9"),i("QBuC"),i("WiIn"),i("y9m4"),i("rzQm")),et=i.n(tt),it=(i("w6W7"),i("wnRD"),i("FaZr"),i("Rk41"),i("QaEu"),i("9Yib"),i("A0n/"),i("IMUI"),i("3QrE"),i("WgSQ"),i("tJwI"),i("fx22"),i("CEO+"),i("vzCy")),nt=i.n(it),at=i("RKnr"),st=i.n(at),rt={AD_SKIP_EVENT:"AD_SKIP_EVENT",CONFIG_LOADED_EVENT:"CONFIG_LOADED_EVENT",CTA_CLICK_EVENT:"CTA_CLICK_EVENT",CTA_IMPRESSION_EVENT:"CTA_IMPRESSION_EVENT",ERROR_EVENT:"ERROR_EVENT",FULL_SCREEN_EVENT:"FULL_SCREEN_EVENT",GROUPM_VIEW_EVENT:"GROUPM_VIEW_EVENT",HEARTBEAT_EVENT:"HEARTBEAT_EVENT",HEARTBEAT_START_EVENT:"HEARTBEAT_START_EVENT",INITIAL_INTEND_TO_PLAY_EVENT:"INITIAL_INTEND_TO_PLAY_EVENT",INTEND_TO_PLAY_EVENT:"INTEND_TO_PLAY_EVENT",LOOP_EVENT:"LOOP_EVENT",MRC_VIEW_EVENT:"MRC_VIEW_EVENT",MUTE_EVENT:"MUTE_EVENT",ONE_SEC_VIEW_EVENT:"ONE_SEC_VIEW_EVENT",SIX_SEC_VIEW_EVENT:"SIX_SEC_VIEW_EVENT",PAUSE_EVENT:"PAUSE_EVENT",PLAY_EVENT:"PLAY_EVENT",PLAY_FROM_TAP_EVENT:"PLAY_FROM_TAP_EVENT",PLAYBACK_25_EVENT:"PLAYBACK_25_EVENT",PLAYBACK_50_EVENT:"PLAYBACK_50_EVENT",PLAYBACK_75_EVENT:"PLAYBACK_75_EVENT",PLAYBACK_95_EVENT:"PLAYBACK_95_EVENT",PLAYBACK_COMPLETE_EVENT:"PLAYBACK_COMPLETE_EVENT",PLAYBACK_ERROR_EVENT:"PLAYBACK_ERROR_EVENT",PLAYBACK_LAPSE_EVENT:"PLAYBACK_LAPSE_EVENT",PLAYBACK_START_EVENT:"PLAYBACK_START_EVENT",REPLAY_EVENT:"REPLAY_EVENT",REWIND_EVENT:"REWIND_EVENT",SHRINK_EVENT:"SHRINK_EVENT",STARTUP_ERROR_EVENT:"STARTUP_ERROR_EVENT",TEARDOWN_EVENT:"TEARDOWN_EVENT",TICK_EVENT:"TICK_EVENT",TRACK_FINISHED_EVENT:"TRACK_FINISHED_EVENT",UNMUTE_EVENT:"UNMUTE_EVENT",VIDEO_SESSION_EVENT:"VIDEO_SESSION_EVENT",VIDEO_QUALITY_VIEW_EVENT:"VIDEO_QUALITY_VIEW_EVENT",VIDEO_VIEW_EVENT:"VIDEO_VIEW_EVENT",VIEW_THRESHOLD_EVENT:"VIEW_THRESHOLD_EVENT"},ot={AD:"ad",CONTENT:"content"},ct={BROADCAST:"broadcast",GIF:"gif",LIVE:"live",MEDIA_ENTITY:"media_entity",PARTNER_VIDEO:"partner_video",PERISCOPE:"periscope",VINE:"vine",VMAP:"vmap"};function lt(t){return dt(t,t.source.trackId)}function ut(t){return dt(t,t.currentTrackId)}function dt(t,e){return t.tracks.find(function(t){return e===t.id})}function _t(t){return t.tracks.find(function(t){return ot.AD===t.displayType})}var ht=((n={})[rt.VIDEO_VIEW_EVENT]="creativeView",n[rt.PLAYBACK_25_EVENT]="firstQuartile",n[rt.PLAYBACK_50_EVENT]="midpoint",n[rt.PLAYBACK_75_EVENT]="thirdQuartile",n[rt.PLAYBACK_COMPLETE_EVENT]="complete",n[rt.PLAY_EVENT]="resume",n[rt.PAUSE_EVENT]="pause",n[rt.REWIND_EVENT]="rewind",n[rt.ERROR_EVENT]="adError",n),Et=function(){function t(t){var e=this;Object.keys(ht).forEach(function(i){t.on(i,function(t){e.fireBeacon(ht[i],t)})}),t.on(rt.PLAYBACK_START_EVENT,this.onPlaybackStart.bind(this))}var e=t.prototype;return e.onPlaybackStart=function(t){this.fireBeacon("start",t),this.fireBeacon("adImpression",t)},e.fireBeacon=function(t,e){var i=ut(e);if(void 0!==i&&void 0!==i.beacons&&void 0!==i.beacons[t]){var n=i.beacons[t],a=Array.isArray(n),s=0;for(n=a?n:n[Symbol.iterator]();;){var r;if(a){if(s>=n.length)break;r=n[s++]}else{if((s=n.next()).done)break;r=s.value}var o=r;(new window.Image).src=o}}},t}(),pt=function(){function t(t){this.analytics=t,this.hasStarted=!1,this.hasFired=!1,this.analytics.on(rt.PLAYBACK_START_EVENT,this.onPlaybackStartEvent.bind(this)),this.analytics.on(rt.INTEND_TO_PLAY_EVENT,this.onShowEvent.bind(this)),this.analytics.on(rt.ERROR_EVENT,this.onErrorEvent.bind(this))}var e=t.prototype;return e.onPlaybackStartEvent=function(){this.hasStarted=!0},e.onShowEvent=function(){this.intentToPlayTime=new Date},e.onErrorEvent=function(t,e){var i=this.constructClientMediaEventError(t,e);if(!this.hasStarted&&!this.hasFired){var n,a=void 0!==this.intentToPlayTime?new Date-this.intentToPlayTime:void 0;i&&(n={latency_millis:a,error:i}),this.analytics.emit(rt.STARTUP_ERROR_EVENT,t,Object.assign({latency:a},e),n),this.hasFired=!0}this.analytics.emit(rt.PLAYBACK_ERROR_EVENT,t,e,i)},e.constructClientMediaEventError=function(t,e){var i=e&&e.media_details&&e.media_details.media_error||{};return{is_fatal:i.is_fatal,category:i.category,message:i.message,retry_count:i.retry_count}},t}(),Tt=function(){function t(t){this.bufferingCount=0,this.bufferingDurationMs=0,this.bufferingBeginTimeMs=void 0,t.on(rt.TICK_EVENT,this.onTickEvent.bind(this)),t.on(rt.HEARTBEAT_START_EVENT,this.onHeartbeatStart.bind(this))}var e=t.prototype;return e.onHeartbeatStart=function(t){var e=ut(t);void 0!==e&&(this.bufferingBeginTimeMs=e.isBuffering?Date.now():void 0,this.bufferingCount=0,this.bufferingDurationMs=0)},e.onTickEvent=function(t){var e=ut(t);void 0!==e&&(e.isBuffering&&null==this.bufferingBeginTimeMs?(this.bufferingBeginTimeMs=Date.now(),this.bufferingCount++):e.isBuffering||null==this.bufferingBeginTimeMs||(this.bufferingDurationMs+=Date.now()-this.bufferingBeginTimeMs,this.bufferingBeginTimeMs=void 0))},e.getBufferTime=function(t){var e=ut(t);if(void 0!==e){var i=this.bufferingDurationMs;return e.isBuffering&&null!=this.bufferingBeginTimeMs&&(i+=Date.now()-this.bufferingBeginTimeMs),i}},t}();function vt(t){return"number"==typeof t?t.toString():"string"==typeof t?t:void 0}var yt=function(){function t(t){this.analytics=t,this.bufferingDurationListener=new Tt(t),this.lastKnownDataUsageBytes=0,this.bitrateHistory=[],this.latencyHistory=[],this.previousTickTimestamp,this.analytics.on(rt.TICK_EVENT,this.onTickEvent.bind(this)),this.analytics.on(rt.PLAY_EVENT,this.onPlayEvent.bind(this)),this.analytics.on(rt.PLAYBACK_START_EVENT,this.onPlaybackStartEvent.bind(this)),this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this)),this.analytics.on(rt.ERROR_EVENT,this.onErrorEvent.bind(this)),this.analytics.on(rt.PAUSE_EVENT,this.onPauseEvent.bind(this)),this.analytics.on(rt.TEARDOWN_EVENT,this.onTeardownEvent.bind(this)),this.analytics.on(rt.LOOP_EVENT,this.onLoopEvent.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=ut(t);if(void 0!==e){if(this.updateTimesOnTick(e),this.updatePerfMetrics(e),t.isScrubbing?this.stopPolling():t.isPlaying&&this.startPolling(t),void 0!==this.lastKnownPlayerState){var i=this.lastKnownPlayerState.percentVisible,n=t.percentVisible;(i>0&&0===n||0===i&&n>0)&&(this.stopPolling(),this.startPolling(t))}this.lastKnownPlayerState=t,this.previousTickTimestamp=Date.now()}},e.onPlayEvent=function(t){this.hasPlaybackStarted&&this.startPolling(t),this.lastKnownPlayerState=t},e.onPlaybackStartEvent=function(t){this.startPolling(t),this.lastKnownPlayerState=t,this.hasPlaybackStarted=!0},e.onTrackFinishedEvent=function(t){this.hasPlaybackStarted=!1,void 0!==ut(t)&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onErrorEvent=function(t,e){e&&e.media_details&&e.media_details.media_error&&e.media_details.media_error.is_fatal&&(this.stopPolling(),this.lastKnownPlayerState=t)},e.onPauseEvent=function(t,e){this.stopPolling(),this.lastKnownPlayerState=t},e.onTeardownEvent=function(t,e){this.stopPolling(!0),this.lastKnownPlayerState=t},e.onLoopEvent=function(t){this.startPolling(t)},e.updateTimesOnTick=function(t){var e;void 0!==(e=t.contentType===ct.BROADCAST||t.contentType===ct.LIVE||t.contentType===ct.PERISCOPE?t.absoluteTimeMs:t.currentTimeMs)&&(this.lastTimeMs=e,void 0===this.startTimeMs&&(this.startTimeMs=e))},e.startPolling=function(t){var e=lt(t);void 0===this.intervalId&&void 0!==e&&e.contentType!==ct.VINE&&(this.analytics.emit(rt.HEARTBEAT_START_EVENT,t),this.onHeartbeatStart(t))},e.stopPolling=function(t){(this.intervalId||t)&&(this.onHeartbeat(),this.lastTimeMs=void 0,this.startTimeMs=void 0),void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},e.onHeartbeatStart=function(t){this.intervalId=setInterval(this.onHeartbeat.bind(this),t.heartbeatIntervalMs||5e3),this.lastTimeMs=void 0,this.startTimeMs=void 0,this.bitrateHistory=[],this.latencyHistory=[]},e.updatePerfMetrics=function(t){if(this.previousTickTimestamp){var e=Date.now()-this.previousTickTimestamp;t.currentBitrate&&this.bitrateHistory.push({value:t.currentBitrate,weight:e}),t.liveLatencyMs&&this.latencyHistory.push({value:t.liveLatencyMs,weight:e})}},e.onHeartbeat=function(){var t=this.lastKnownPlayerState;if(t){var e=ut(t),i=this.getProgramDateTimeMs();if(void 0!==i&&void 0!==e){var n=e.currentBitrate?{sampled_bitrate:e.currentBitrate}:{},a=0;t.dataUsageBytes&&(a=t.dataUsageBytes-this.lastKnownDataUsageBytes,this.lastKnownDataUsageBytes=t.dataUsageBytes);var s,r,o={data_usage_bytes:a},c=this.bufferingDurationListener.bufferingCount,l=this.bufferingDurationListener.getBufferTime(t),u=Math.floor(100*t.percentVisible),d=Object.assign({buffering_duration_millis:l,video_visibility:u},i,n,o),_={buffering_duration_millis:vt(l),buffering_count:c,percent_in_view:u,sampled_bits_per_second:e.currentBitrate,data_usage_bytes:vt(o.data_usage_bytes),start_program_date_time_millis:vt(i.start_program_date_time_millis),end_program_date_time_millis:vt(i.end_program_date_time_millis),bandwidth_estimate_bps:vt(t.bandwidthEstimateBps),bitrate_metrics:(s=this.bitrateHistory,r=ft(s),r&&{min_bps:Math.round(r.min),max_bps:Math.round(r.max),avg_bps:Math.round(r.avg)}),live_or_non_live_heartbeat_metrics:function(t,e){var i=ft(e);if(t)return{live_heartbeat_metrics:{latency_metrics:i&&{min_ms:Math.round(i.min),max_ms:Math.round(i.max),avg_ms:Math.round(i.avg)}}};return{non_live_heartbeat_metrics:{}}}(e.isLive,this.latencyHistory)};this.analytics.emit(rt.HEARTBEAT_EVENT,t,d,_)}}},e.getProgramDateTimeMs=function(){if(void 0!==this.startTimeMs&&void 0!==this.lastTimeMs){var t=this.startTimeMs,e=this.lastTimeMs;return this.startTimeMs=this.lastTimeMs,{start_program_date_time_millis:Math.round(t),end_program_date_time_millis:Math.round(e)}}return{}},t}();function ft(t){if(t&&t.length){var e=t.map(function(t){return t.value});return{min:Math.min.apply(Math,et()(e)),max:Math.max.apply(Math,et()(e)),avg:function(t){var e=t.reduce(function(t,e){return t+e.weight},0);return t.reduce(function(t,e){return t+e.value*e.weight},0)/e}(t)}}}var mt=function(){function t(t){this.analytics=t,this.hasFiredOnTrackMap={},this.analytics.on(rt.INTEND_TO_PLAY_EVENT,this.onIntendToPlayEvent.bind(this)),this.analytics.on(rt.REPLAY_EVENT,this.onIntendToPlayEvent.bind(this)),this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this))}var e=t.prototype;return e.onIntendToPlayEvent=function(t){this.hasFiredOnTrackMap[t.currentTrackId]||(this.hasFiredOnTrackMap[t.currentTrackId]=!0,this.analytics.emit(rt.INITIAL_INTEND_TO_PLAY_EVENT,t))},e.onTrackFinishedEvent=function(t){var e=ut(t);e&&(e.shouldLoop||(this.hasFiredOnTrackMap[t.currentTrackId]=!1))},t}(),gt=function(){function t(t){this.analytics=t,this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this))}return t.prototype.onTrackFinishedEvent=function(t){var e=ut(t);void 0!==e&&e.shouldLoop&&this.analytics.emit(rt.LOOP_EVENT,t)},t}(),Pt={home:"HomeTimeline",list:"Lists",live_broadcast:"BroadcastPage",live_event_timeline:"EventPage",me:"UserTimeline",moments:"Moments",permalink:"TweetCard",profile:"UserTimeline",search:"Search"},It=function(t){return"/api/v2/"+t},Vt="videoStartWatchingLive",bt="videoPingLive",At="videoStopWatchingLive",Nt=((a={})[Vt]={method:"GET",path:It("startPublic")},a[bt]={method:"GET",path:It("pingPublic")},a[At]={method:"GET",path:It("stopPublic")},a.videoStartWatchingReplay={method:"GET",path:It("replayViewedPublic")},a.videoPingReplay={method:"GET",path:It("pingReplayViewedPublic")},a.videoStopWatchingReplay={method:"GET",path:It("endReplayViewedPublic")},a),St=function(){function t(t,e){if(this.httpClient=t,this.idempotenceId=Date.now()+"--"+st()(),e){var i=e.scribeContext,n=e.periscopeComponent;this.pageContext=this.getPageContext(i),this.componentContext=n}}var e=t.prototype;return e.getPageContext=function(t){var e=t.page;return"permalink_overlay"===t.section?"TweetCard":Pt[e]||""},e.call=function(t,e){var i={"X-Idempotence":this.idempotenceId},n=Nt[t],a=n.method,s=n.path;return this.httpClient.dispatch({headers:i,host:"https://proxsee.pscp.tv",method:a,path:s,params:e})},e.videoStartWatching=function(t,e,i){var n=this;return new Promise(function(a,s){("string"!=typeof t||t.length<1)&&s(new Error("Cannot videoStartWatching. lifecycleToken not valid, lifecycleToken="+t));var r=e?"videoStartWatchingReplay":Vt,o={life_cycle_token:t,auto_play:!!i};n.pageContext&&(o.page=n.pageContext),n.componentContext&&(o.component=n.componentContext),n.call(r,o).then(function(t){var e=JSON.parse(t.body).session;e?a(e):s("No valid Session")},s)})},e.videoPingWatching=function(t,e){var i=this;return new Promise(function(n,a){("string"!=typeof t||t.length<1)&&a(new Error("Cannot videoPingWatching. session not valid, session="+t));var s=e?"videoPingReplay":bt;i.call(s,{session:t}).then(function(t){JSON.parse(t.body).success?n():a("Ping request failed")},a)})},e.videoStopWatching=function(t,e){var i=this;return new Promise(function(n,a){("string"!=typeof t||t.length<1)&&a(new Error("Cannot videoStopWatching. session not valid, session="+t));var s=e?"videoStopWatchingReplay":At;i.call(s,{session:t}).then(function(t){JSON.parse(t.body).success?n():a("StopWatching request failed")},a)})},t}(),Ct=3e3,Mt=1e4,wt=.95,Lt=6e3,Rt=.95,Ot=3e3,kt=.5,Dt=.5;var Wt=function(){function t(t){this.api=t,this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),this.startPingWatching=this.startPingWatching.bind(this),this.isVideoPreview=!1,this.isReplay=!0}var e=t.prototype;return e.updateSession=function(t){this.session=t},e.setStartWatchingTimer=function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,Ct)},e.clearStartWatchingTimer=function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)},e.handleStartWatching=function(){if(!this.isWatching){this.stopPingWatching();var t=this.api.videoStartWatching(this.lifecycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession).then(this.startPingWatching);return this.isWatching=!0,t}},e.startPingWatching=function(){var t=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval(function(){t.isWatching?t.api.videoPingWatching(t.session,t.isReplay):t.stopPingWatching()},3e4)},e.stopPingWatching=function(){clearInterval(this.pingWatchingTimer)},e.updateLifecycleToken=function(t){void 0!==t&&t!==this.lifecycleToken&&(this.lifecycleToken=t,this.isWatching&&(this.stopWatching(),this.handleStartWatching()))},e.updateIsReplay=function(t){void 0!==t&&t!==this.isReplay&&(this.isReplay=t)},e.startWatching=function(){return this.isVideoPreview=!1,this.handleStartWatching()},e.startWatchingPreview=function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()},e.stopWatching=function(){this.isWatching&&(this.stopPingWatching(),this.session&&this.api.videoStopWatching(this.session,this.isReplay),this.isWatching=!1)},e.destroy=function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifecycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0},t}(),Ft=[rt.CONFIG_LOADED_EVENT,rt.PLAY_EVENT,rt.PAUSE_EVENT,rt.TRACK_FINISHED_EVENT,rt.TEARDOWN_EVENT],Bt=function(){function t(t,e){var i=this;this.analytics=t,this.lifecycleController=e,Ft.map(function(t){return i.analytics.on(t,i.possiblyHandleEvent.bind(i,t))})}var e=t.prototype;return e.possiblyHandleEvent=function(t,e){if(this.shouldSendPeriscopeAnalytics(e)){var i=ut(e);switch(t){case rt.CONFIG_LOADED_EVENT:this.updateLifecycleToken(e),this.updateReplayState(!i.isLive);break;case rt.PLAY_EVENT:this.handleStartWatching(e);break;case rt.PAUSE_EVENT:this.handleStopWatching(e);break;case rt.TRACK_FINISHED_EVENT:this.handleStopWatching(e),this.updateReplayState(!0);break;case rt.TEARDOWN_EVENT:this.teardownPeriscopeLifecycle()}}},e.shouldSendPeriscopeAnalytics=function(t){var e=ut(t);return void 0!==e&&(e.contentType===ct.PERISCOPE||e.contentType===ct.BROADCAST)},e.getLifecycleToken=function(t){return ut(t).lifecycleToken},e.updateLifecycleToken=function(t){var e=this.getLifecycleToken(t);this.lifecycleController.updateLifecycleToken(e)},e.updateReplayState=function(t){this.lifecycleController.updateIsReplay(t)},e.handleStartWatching=function(t){this.getLifecycleToken(t)&&(t.isPreview?this.lifecycleController.startWatchingPreview():this.lifecycleController.startWatching())},e.handleStopWatching=function(t){this.getLifecycleToken(t)&&this.lifecycleController.stopWatching()},e.teardownPeriscopeLifecycle=function(){this.lifecycleController.destroy(),this.lifecycleController=null},t}(),Ht=function(){function t(t){this.analytics=t,this.lapseMap={},this.analytics.on(rt.TICK_EVENT,this.onTickEvent.bind(this)),this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this)),this.analytics.on(rt.AD_SKIP_EVENT,this.onAdSkipEvent.bind(this)),this.analytics.on(rt.VIDEO_VIEW_EVENT,this.onVideoViewEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=ut(t);if(void 0!==e){var i=this.lapseMap[e.id];if(void 0!==i){i.timePlayedToMs=0;var n=lt(t);n&&n.contentType!==ct.GIF&&!e.shouldLoop&&(this.emit(i,t),i.viewFired=!1)}}},e.onAdSkipEvent=function(t){this.onTickEvent(t);var e=ut(t);if(void 0!==e){var i=this.lapseMap[e.id];this.emit(i,t)}},e.onVideoViewEvent=function(t){var e=ut(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),i.viewFired=!0}},e.onTickEvent=function(t){var e=ut(t);if(void 0!==e){var i=this.lapseMap[e.id];void 0===i&&(i=this.initializeLapseMapForTrack(e),this.lapseMap[e.id]=i),t.isScrubbing?i.timePlayedToMs=e.currentTimeMs:(this.updateTimingData(e,i),this.checkPlaybackLapse(i,t))}},e.initializeLapseMapForTrack=function(t){return{timePlayedMs:0,timePlayedToMs:t.currentTimeMs,viewFired:!1}},e.updateTimingData=function(t,e){var i=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs,e.timePlayedMs+=i},e.checkPlaybackLapse=function(t,e){t.timePlayedMs>1e4&&this.emit(t,e)},e.emit=function(t,e){var i=lt(e),n=t.viewFired,a=t.timePlayedMs;n&&a>0&&i&&i.contentType!==ct.LIVE&&(this.analytics.emit(rt.PLAYBACK_LAPSE_EVENT,e,{playback_lapse_ms:Math.round(a)}),t.timePlayedMs=0)},t}(),Ut=((s={})[rt.PLAYBACK_START_EVENT]="playback_start",s[rt.PLAYBACK_25_EVENT]="playback_25",s[rt.PLAYBACK_50_EVENT]="playback_50",s[rt.PLAYBACK_75_EVENT]="playback_75",s[rt.PLAYBACK_95_EVENT]="playback_95",s[rt.PLAYBACK_COMPLETE_EVENT]="playback_complete",s[rt.MRC_VIEW_EVENT]="mrc_view",s[rt.GROUPM_VIEW_EVENT]="groupm_view",s[rt.ONE_SEC_VIEW_EVENT]="1sec_view",s[rt.SIX_SEC_VIEW_EVENT]="6sec_view",s[rt.VIDEO_VIEW_EVENT]="view",s[rt.PLAY_FROM_TAP_EVENT]="play_from_tap",s[rt.VIEW_THRESHOLD_EVENT]="view_threshold",s),Kt=function(){function t(t,e){var i=this;this.promotedLogHandler=e,Object.keys(Ut).forEach(function(e){t.on(e,function(t,n){var a=ut(t);void 0!==a&&i.log(i.buildEventName(e,a),t,n)})}),t.on(rt.PLAYBACK_START_EVENT,this.logImpression.bind(this)),t.on(rt.CTA_CLICK_EVENT,this.onCtaClickEvent.bind(this)),t.on(rt.VIDEO_SESSION_EVENT,this.onVideoSessionEvent.bind(this))}var e=t.prototype;return e.buildEventName=function(t,e){var i=Ut[t];return"video_"+e.displayType+"_"+i},e.log=function(t,e,i,n){void 0===i&&(i={});var a=ut(e),s=this.getPromotedEventData(e,a);if(void 0!==s.impression_id){var r=this.getAmplifyDetailsData(e,a,i),o=JSON.stringify({amplify_details:r}),c=n&&JSON.stringify(n),l=Object.assign(s,r,{event:t,card_event:o,engagement_metadata:c});this.promotedLogHandler.log(l)}},e.logImpression=function(t){var e=ut(t);this.isPromotedTrack(t,e)&&this.log("impression",t)},e.onCtaClickEvent=function(t){var e=ut(t);if(void 0!==e){var i=e.cta;void 0!==i&&(e.displayType===ot.AD?this.log("video_"+e.displayType+"_cta_"+i.type+"_click",t):this.log("video_cta_"+i.type+"_click",t))}},e.onVideoSessionEvent=function(t,e){void 0!==e&&this.log("video_session",t,{},e)},e.isPromotedTrack=function(t,e){return e&&e.impressionId&&e.disclosureType},e.getPromotedEventData=function(t,e){var i=e.disclosureType||t.disclosureType;return{impression_id:e.impressionId||t.impressionId,earned:"earned"===i}},e.getAmplifyDetailsData=function(t,e,i){var n=lt(t),a=_t(t)||{};return Object.assign({content_id:n.contentId,dynamic_preroll_type:a.dynamicPrerollType,preroll_uuid:a.contentId,preroll_owner_id:a.publisherId,video_uuid:e.contentId,video_type:e.displayType===ot.CONTENT?"video":"ad",video_is_muted:t.isMuted,video_visibility:Math.floor(100*t.percentVisible)},i)},t}(),Yt=function(){function t(t){this.analytics=t,this.analytics.on(rt.TICK_EVENT,this.onTickEvent.bind(this))}return t.prototype.onTickEvent=function(t){var e=ut(t);void 0!==e&&(t.isScrubbing&&void 0===this.scrubbingStartTime?this.scrubbingStartTime=e.currentTimeMs:t.isScrubbing||void 0===this.scrubbingStartTime||(e.currentTimeMs<this.scrubbingStartTime&&this.analytics.emit(rt.REWIND_EVENT,t),this.scrubbingStartTime=void 0))},t}(),xt=((r={})[rt.VIDEO_VIEW_EVENT]="video_view",r[rt.PLAY_FROM_TAP_EVENT]="play_from_tap",r[rt.VIEW_THRESHOLD_EVENT]="view_threshold",r[rt.MRC_VIEW_EVENT]="video_mrc_view",r[rt.SIX_SEC_VIEW_EVENT]="video_6sec_view",r[rt.PLAYBACK_START_EVENT]="playback_start",r[rt.PLAYBACK_25_EVENT]="playback_25",r[rt.PLAYBACK_50_EVENT]="playback_50",r[rt.PLAYBACK_75_EVENT]="playback_75",r[rt.PLAYBACK_95_EVENT]="playback_95",r[rt.PLAYBACK_COMPLETE_EVENT]="playback_complete",r[rt.INITIAL_INTEND_TO_PLAY_EVENT]="intent_to_play",r[rt.PLAY_EVENT]="play",r[rt.PAUSE_EVENT]="pause",r[rt.REPLAY_EVENT]="replay",r[rt.LOOP_EVENT]="loop",r[rt.MUTE_EVENT]="mute",r[rt.UNMUTE_EVENT]="unmute",r[rt.FULL_SCREEN_EVENT]="full_screen",r[rt.SHRINK_EVENT]="shrink",r[rt.PLAYBACK_LAPSE_EVENT]="playback_lapse",r[rt.PLAYBACK_ERROR_EVENT]="error",r[rt.STARTUP_ERROR_EVENT]="playback_startup_error",r[rt.VIDEO_QUALITY_VIEW_EVENT]="video_quality_view",r[rt.AD_SKIP_EVENT]="video_ad_skip",r),Gt=["playback_lapse","video_1sec_view","shrink","full_screen"].reduce(function(t,e){return t[e]=!0,t},{}),jt="tweet",qt="client_event",zt="live_video_heartbeat_event",Qt=7,Xt=13,Jt=16,Zt=26,$t=28,te=1,ee=2,ie={LIVE:1,REPLAY:2,UNKNOWN:3},ne=["appplayer","poll2choice_video","poll3choice_video","poll4choice_video","promo_video_convo","promo_video_website","video_direct_message"],ae=/^([0-9]{1,2})_([0-9]+)$/,se=function(){function t(t,e,i){var n=this;this.scribeHandler=e,this.context=i||{},this.isAdFormatsCard=-1!==ne.indexOf(this.context.cardType),Object.keys(xt).forEach(function(e){t.on(e,function(t,i,a){n.scribe(xt[e],t,i,a)})}),t.on(rt.CTA_CLICK_EVENT,this.onCtaClickEvent.bind(this)),t.on(rt.CTA_IMPRESSION_EVENT,this.onCtaImpressionEvent.bind(this)),t.on(rt.HEARTBEAT_EVENT,this.onHeartbeatEvent.bind(this))}var e=t.prototype;return e.onCtaClickEvent=function(t){var e=ut(t).cta;void 0!==e&&this.scribe("cta_"+e.type+"_click",t)},e.onCtaImpressionEvent=function(t){var e=ut(t).cta;void 0!==e&&this.scribe("cta_"+e.type+"_impression",t)},e.onHeartbeatEvent=function(t,e,i){var n=lt(t);if(void 0!==n){var a;switch(n.contentType){case ct.LIVE:case ct.BROADCAST:a=zt;break;default:a=qt}this.scribe("heartbeat",t,e,i,a)}},e.scribe=function(t,e,i,n,a){void 0===i&&(i={}),void 0===n&&(n={}),void 0===a&&(a=qt);var s,r,o,c,l=lt(e)||{},u=ut(e)||{},d=_t(e)||{},_=e.session||{},h=(e.features||{}).isLiveTimecodeEnabled&&u.requestedTimecode>0?1e3*u.requestedTimecode:void 0;this.isActionSupportedInClientMediaEvent(t)&&(s={media_client_event_type:(r={},r[t]=n,r),session_state:{session_id:_.id,content_video_identifier:(o=this.getContentIdentifier(l),c=this.context.scribeContext,re(c)?{scrubbed_identifier:{}}:o),video_ads_passthrough_data:e.videoAnalyticsScribePassthrough,live_event_identifier:this.getLiveEventIdentifier(e,l.contentType),tweet_id:this.getTweetId(e.source,l.contentType)},playing_media_state:{video_type:u.displayType===ot.CONTENT?ee:te,media_asset_url:this.getVariantUrl(u),media_timecode_millis:vt(h),media_metadata:{broadcast_id:u.broadcastId,twitter_publisher_id:vt(u.publisherId),publisher_identifier:function(t,e,i){return re(i)?{scrubbed_publisher_identifier:{}}:t&&e?{twitter_periscope_publisher_identifier:{twitter_id:vt(t),periscope_id:e}}:t?{twitter_publisher_identifier:{id:vt(t)}}:e?{periscope_publisher_identifier:{id:e}}:{unknown_publisher_identifier:{}}}(u.publisherId,u.periscopePublisherId,this.context.scribeContext)},broadcast_media_state:function(t,e){if(t===ct.BROADCAST||t===ct.LIVE||t===ct.PERISCOPE)return{broadcast_state:e?ie.LIVE:ie.REPLAY}}(u.contentType,u.isLive)},player_state:{is_muted:e.isMuted}});var E=Object.assign({},this.getBaseItem(e.source,e.eventId),{media_asset_url:this.getVariantUrl(u),video_uuid:u.contentId,video_owner_id:u.publisherId,video_type:u.displayType===ot.CONTENT?"video":"ad",promoted_id:u.impressionId||e.impressionId,content_id:l.contentId,dynamic_preroll_type:d.dynamicPrerollType,preroll_uuid:d.contentId,preroll_owner_id:d.publisherId,publisher_id:l.publisherId,media_session_id:_.id,video_analytics_scribe_passthrough:e.videoAnalyticsScribePassthrough,client_media_event:s,media_timecode_millis:h,disclosure_type:u.disclosureType||e.disclosureType},i,this.getLexMetadata(e,l));this.scribeHandler.log({namespace:{element:this.getScribeElement(l),action:t},category:a,data:{items:[E]}})},e.getContentIdentifier=function(t){var e=t.contentId,i=this.parseMediaKeyString(e);if(i)return{media_platform_identifier:i};switch(t.contentType){case ct.MEDIA_ENTITY:case ct.GIF:case ct.LIVE:case ct.BROADCAST:return this.getMediaPlatformIdentifierUsingDefaultCategory(t);case ct.VMAP:return this.isAdFormatsCard?{media_platform_identifier:{media_category:this.getMediaEntityCategoryUsingPlaybackUrl(t),media_id:e}}:{amplify_card_identifier:{vmap_url:t.vmapUrl,content_id:e}};case ct.VINE:case ct.PERISCOPE:case ct.PARTNER_VIDEO:default:return{unknown_identifier:{content_id:e}}}},e.parseMediaKeyString=function(t){var e=ae.exec(t)||[],i=e[1],n=e[2],a=+i;if(a&&n)return{media_category:a,media_id:n}},e.getMediaPlatformIdentifierUsingDefaultCategory=function(t){var e=this.defaultMediaCategory(t);return e?{media_platform_identifier:{media_category:e,media_id:t.contentId}}:{unknown_identifier:{content_id:t.contentId}}},e.getMediaEntityCategoryUsingPlaybackUrl=function(t){var e=this.getVariantUrl(t);if(e){if(-1!==e.indexOf("amplify_video"))return Xt;if(-1!==e.indexOf("ext_tw_video"))return Qt}},e.defaultMediaCategory=function(t){switch(t.contentType){case ct.GIF:return Jt;case ct.LIVE:return Zt;case ct.BROADCAST:return $t;case ct.MEDIA_ENTITY:return this.getMediaEntityCategoryUsingPlaybackUrl(t);default:return}},e.getLiveEventIdentifier=function(t,e){return t.eventId?{lex_event_identifier:{lex_event_id:t.eventId}}:e===ct.LIVE?{legacy_live_event_identifier:{legacy_live_event_id:t.source.id}}:void 0},e.getTweetId=function(t,e){return e===ct.BROADCAST||e===ct.LIVE?t.tweetId:t.type===jt?t.id:void 0},e.getScribeElement=function(t){switch(t.contentType){case ct.VINE:return"vine_player";case ct.GIF:return"gif_player";case ct.VMAP:return"platform_amplify_card";case ct.LIVE:case ct.BROADCAST:return"live_video_player";case ct.PARTNER_VIDEO:return"partner_video_player";case ct.PERISCOPE:return"periscope_player";case ct.MEDIA_ENTITY:default:return"video_player"}},e.getBaseItem=function(t,e){var i=this.context.baseScribeItem;return i||(t.type===jt?{id:t.id,item_type:"0"}:t.tweetId?{id:t.tweetId,item_type:"0"}:e?{id:e,item_type:"28"}:void 0)},e.getLexMetadata=function(t,e){var i=this.context.scribeContext||{},n={},a={};return e.broadcastId&&(n.is_replay_broadcast=!e.isLive,a.tweet_id=t.source.tweetId,"live_event_timeline"===i.page&&"tweet"!==i.component?n.host_broadcast_id=e.broadcastId:n.target_broadcast_id=e.broadcastId),t.eventId&&("live_event_timeline"===i.page&&"tweet"!==i.component?a.host_event_id=t.eventId:a.target_event_id=t.eventId),{live_broadcast_details:n,live_video_event_details:a}},e.getVariantUrl=function(t){var e=t.variants&&t.variants[t.currentVariantIndex];return e&&e.src},e.isActionSupportedInClientMediaEvent=function(t){return!Gt[t]},t}();function re(t){return t&&"messages"===t.page}var oe=function(){function t(t){this.analytics=t,this.analytics.on(rt.REPLAY_EVENT,this.onReplayEvent.bind(this)),this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this)),this.analytics.on(rt.INITIAL_INTEND_TO_PLAY_EVENT,this.onInitialIntendToPlayEvent.bind(this))}var e=t.prototype;return e.onInitialIntendToPlayEvent=function(t){this.resetLatencyStartDate(t.intentToPlayTime)},e.onReplayEvent=function(){this.resetLatencyStartDate()},e.onTrackFinishedEvent=function(t){this.resetLatencyStartDate(),this.trackId!==t.currentTrackId&&(this.trackId=t.currentTrackId)},e.resetLatencyStartDate=function(t){this.latencyStartDate=t||new Date},e.getLatencyData=function(){if(void 0!==this.latencyStartDate)return{latency:new Date-this.latencyStartDate}},t}(),ce=[{progress:.25,event:rt.PLAYBACK_25_EVENT},{progress:.5,event:rt.PLAYBACK_50_EVENT},{progress:.75,event:rt.PLAYBACK_75_EVENT},{progress:.95,event:rt.PLAYBACK_95_EVENT},{progress:1,event:rt.PLAYBACK_COMPLETE_EVENT}],le=function(){function t(t){this.analytics=t,this.eventMap={},this.playbackLatencyListener=new oe(t),this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this)),this.analytics.on(rt.TICK_EVENT,this.onTickEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=ut(t);void 0!==e&&(e.shouldLoop||(this.eventMap[t.currentTrackId]={}))},e.onTickEvent=function(t){var e=ut(t);if(void 0!==e&&e.durationMs){var i=this.eventMap[e.id];void 0===i&&(i={},this.eventMap[e.id]=i),this.checkAllTentpoles(e,i,t)}},e.checkAllTentpoles=function(t,e,i){if(i.isPlaying){var n=t.durationMs,a=t.currentTimeMs,s=this.playbackLatencyListener.getLatencyData()||{},r={latency_millis:s.latency,cache_info:{notCached:{}}};this.emitOnce(rt.PLAYBACK_START_EVENT,e,i,s,r),t.isLive||this.checkProgressTentpoles(n,a,e,i)}},e.checkProgressTentpoles=function(t,e,i,n){var a=this;ce.forEach(function(s){var r=s.progress*t;e>=r-1e3&&e<=r+1e3&&a.emitOnce(s.event,i,n)})},e.emitOnce=function(t,e,i,n,a){e[t]||(this.analytics.emit(t,i,n,a),e[t]=!0)},t}(),ue=[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100],de=((o={})[ct.VINE]=2,o[ct.GIF]=3,o[ct.VMAP]=1,o[ct.MEDIA_ENTITY]=1,o[ct.LIVE]=1,o[ct.PERISCOPE]=5,o[ct.BROADCAST]=1,o),_e=function(){function t(t){this.analytics=t,this.sessionDataStore={},this.analytics.on(rt.TICK_EVENT,this.onTickEvent.bind(this)),this.analytics.on(rt.FULL_SCREEN_EVENT,this.onFullscreenEvent.bind(this)),this.analytics.on(rt.SHRINK_EVENT,this.onShrinkEvent.bind(this)),this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this)),this.analytics.on(rt.AD_SKIP_EVENT,this.onTrackInterrupt.bind(this)),this.analytics.on(rt.TEARDOWN_EVENT,this.onTrackInterrupt.bind(this))}var e=t.prototype;return e.onTickEvent=function(t){var e=ut(t);if(void 0!==e){var i=this.getOrCreateNewSessionDataForTrack(e,t);t.isScrubbing?i.currentTimeMs=e.currentTimeMs:this.updateViewData(e,i,t)}},e.onFullscreenEvent=function(t){var e=ut(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!0)},e.onShrinkEvent=function(t){var e=ut(t);void 0!==e&&(this.getOrCreateNewSessionDataForTrack(e,t).isFullscreenMode=!1)},e.onTrackFinishedEvent=function(t){var e=ut(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i)if(e.shouldLoop)i.currentTimeMs=0;else{if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.onTrackInterrupt=function(t){var e=ut(t);if(void 0!==e){var i=this.sessionDataStore[e.id];if(void 0!==i){if(i.timeWatchedMs>0){var n=this.constructVideoSessionDetails(i,e);this.emitVideoSessionEvent(t,n)}this.sessionDataStore[e.id]=void 0}}},e.getOrCreateNewSessionDataForTrack=function(t,e){var i=this.sessionDataStore[t.id];return void 0===i&&(i={sizesInfoAtTheStart:e.sizesInfo,currentTimeMs:t.currentTimeMs,isFullscreenMode:!1,timeWatchedMs:0,timeWatchedFullscreenMs:0,timeWatchedWithAudioMs:0,timeWatchedFullscreenWithAudioMs:0,watchedMsByInViewPct:this.generateNewAggregateHistogram(),watchedWithAudioMsByInViewPct:this.generateNewAggregateHistogram(),watchedMsByViewportPct:this.generateNewAggregateHistogram(),maxContinuousWatchedMsByInViewPct:this.generateNewMaxContinuousHistogram(),maxContinuousWatchedWithAudioMsByInViewPct:this.generateNewMaxContinuousHistogram()},this.sessionDataStore[t.id]=i),i},e.generateNewAggregateHistogram=function(){for(var t={},e=0;e<ue.length;e++){t[ue[e]]=0}return t},e.generateNewMaxContinuousHistogram=function(){for(var t={},e=0;e<ue.length;e++){t[ue[e]]={current:0,max:0}}return t},e.resetContinuousViewDataForHistogram=function(t){for(var e=0;e<ue.length;e++){var i=ue[e];this.resetContinuousViewDataForBucket(t[i])}},e.resetContinuousViewDataForBucket=function(t){t.max=Math.max(t.current,t.max),t.current=0},e.updateViewData=function(t,e,i){var n=t.currentTimeMs-e.currentTimeMs,a=e.isFullscreenMode?1:i.percentVisible,s=e.isFullscreenMode?1:i.percentOfViewportOccupied;e.currentTimeMs=t.currentTimeMs,n<0||(e.timeWatchedMs+=n,this.updateAggregateHistogram(e.watchedMsByInViewPct,a,n),this.updateAggregateHistogram(e.watchedMsByViewportPct,s,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedMsByInViewPct,a,n),i.isMuted?this.resetContinuousViewDataForHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct):(e.timeWatchedWithAudioMs+=n,this.updateAggregateHistogram(e.watchedWithAudioMsByInViewPct,a,n),this.updateMaxContinuousHistogram(e.maxContinuousWatchedWithAudioMsByInViewPct,a,n)),e.isFullscreenMode&&(e.timeWatchedFullscreenMs+=n,i.isMuted||(e.timeWatchedFullscreenWithAudioMs+=n)))},e.updateAggregateHistogram=function(t,e,i){if(0!==e)for(var n=100*e,a=0;a<ue.length;a++){var s=ue[a];n>=s&&(t[s]+=i)}},e.updateMaxContinuousHistogram=function(t,e,i){if(0!==e)for(var n=100*e,a=0;a<ue.length;a++){var s=ue[a];n>=s?t[s].current+=i:t[s].current>0&&this.resetContinuousViewDataForBucket(t[s])}else this.resetContinuousViewDataForHistogram(t)},e.constructVideoSessionDetails=function(t,e){return{video_details:{is_preroll_video:e.displayType===ot.AD,video_length:Math.round(e.durationMs),time_watched:Math.round(t.timeWatchedMs),time_watched_fullscreen:Math.round(t.timeWatchedFullscreenMs),time_watched_with_audio:Math.round(t.timeWatchedWithAudioMs),time_watched_fullscreen_with_audio:Math.round(t.timeWatchedFullscreenWithAudioMs),time_watched_100_with_audio:Math.round(t.watchedWithAudioMsByInViewPct[100]),video_type:de[e.contentType],watched_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedMsByInViewPct),watched_with_audio_ms_by_in_view_pct:this.constructAggregateHistogramPayload(t.watchedWithAudioMsByInViewPct),watched_ms_by_viewport_pct:this.constructAggregateHistogramPayload(t.watchedMsByViewportPct),max_continuous_watched_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedMsByInViewPct),max_continuous_watched_with_audio_ms_by_in_view_pct:this.constructMaxContinuousHistogramPayload(t.maxContinuousWatchedWithAudioMsByInViewPct),sizes_info_at_the_start:{viewport_size:t.sizesInfoAtTheStart.viewportSize,ad_size:t.sizesInfoAtTheStart.mediaSize}}}},e.constructAggregateHistogramPayload=function(t){for(var e={},i=0;i<ue.length;i++){var n=ue[i];e[n]=Math.round(t[n])}return{histogram:e}},e.constructMaxContinuousHistogramPayload=function(t){for(var e={},i=0;i<ue.length;i++){var n=ue[i],a=t[n];e[n]=Math.round(Math.max(a.current,a.max))}return{histogram:e}},e.emitVideoSessionEvent=function(t,e){this.analytics.emit(rt.VIDEO_SESSION_EVENT,t,e)},t}(),he=[rt.VIDEO_VIEW_EVENT,rt.PLAY_FROM_TAP_EVENT,rt.VIEW_THRESHOLD_EVENT,rt.ONE_SEC_VIEW_EVENT,rt.GROUPM_VIEW_EVENT,rt.MRC_VIEW_EVENT,rt.VIDEO_QUALITY_VIEW_EVENT,rt.SIX_SEC_VIEW_EVENT],Ee=[rt.ONE_SEC_VIEW_EVENT,rt.MRC_VIEW_EVENT,rt.VIDEO_QUALITY_VIEW_EVENT],pe=function(){function t(t){this.analytics=t,this.eventMap={},this.analytics.on(rt.TICK_EVENT,this.onTickEvent.bind(this)),this.analytics.on(rt.TRACK_FINISHED_EVENT,this.onTrackFinishedEvent.bind(this)),this.analytics.on(rt.PAUSE_EVENT,this.onPauseEvent.bind(this))}var e=t.prototype;return e.onTrackFinishedEvent=function(t){var e=ut(t);if(void 0!==e){var i=this.eventMap[e.id];void 0!==i&&(e.shouldLoop?i.timePlayedToMs=0:this.eventMap[e.id]=void 0)}},e.onPauseEvent=function(t){this.resetContinuousViewEventTimingData(t)},e.onTickEvent=function(t){var e=ut(t);if(void 0!==e){var i=this.eventMap[e.id];if(void 0===i){i={timePlayedToMs:e.currentTimeMs};for(var n=0;n<he.length;n++){i[he[n]]={timePlayedMs:0,visibilityWeightedTimePlayedMs:0,fired:!1}}this.eventMap[e.id]=i}t.isScrubbing?(i.timePlayedToMs=e.currentTimeMs,this.resetContinuousViewEventTimingData(t)):(this.updateTimingData(e,i,t),this.checkViewEvents(e,i,t)),this.checkPlayFromTap(i,t)}},e.updateTimingData=function(t,e,i){var n=t.currentTimeMs-e.timePlayedToMs;e.timePlayedToMs=t.currentTimeMs;var a=i.percentVisible;a>=1&&(e[rt.VIEW_THRESHOLD_EVENT].timePlayedMs+=n),a>=1?e[rt.ONE_SEC_VIEW_EVENT].timePlayedMs+=n:e[rt.ONE_SEC_VIEW_EVENT].timePlayedMs=0,a>=.5?e[rt.MRC_VIEW_EVENT].timePlayedMs+=n:e[rt.MRC_VIEW_EVENT].timePlayedMs=0,a>=1&&!i.isMuted&&(e[rt.GROUPM_VIEW_EVENT].timePlayedMs+=n),a>=.5?e[rt.VIDEO_QUALITY_VIEW_EVENT].timePlayedMs+=n:e[rt.VIDEO_QUALITY_VIEW_EVENT].timePlayedMs=0,e[rt.SIX_SEC_VIEW_EVENT].timePlayedMs+=n,a>=.5&&(e[rt.SIX_SEC_VIEW_EVENT].visibilityWeightedTimePlayedMs+=a*n)},e.resetContinuousViewEventTimingData=function(t){var e=this.eventMap[t.currentTrackId];if(void 0!==e)for(var i=0;i<Ee.length;i++){e[Ee[i]].timePlayedMs=0}},e.checkViewEvents=function(t,e,i){var n;e[rt.VIEW_THRESHOLD_EVENT].timePlayedMs>=(!(n=t).isLive&&n.durationMs>0&&!n.shouldLoop?Math.min(n.durationMs-500,Ct):Ct)&&(this.emitOnce(rt.VIEW_THRESHOLD_EVENT,e,i),this.emitOnce(rt.VIDEO_VIEW_EVENT,e,i)),e[rt.ONE_SEC_VIEW_EVENT].timePlayedMs>=1e3&&this.emitOnce(rt.ONE_SEC_VIEW_EVENT,e,i),e[rt.GROUPM_VIEW_EVENT].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?t.durationMs*Dt:Number.MAX_SAFE_INTEGER}(t)&&this.emitOnce(rt.GROUPM_VIEW_EVENT,e,i),e[rt.MRC_VIEW_EVENT].timePlayedMs>=2e3&&this.emitOnce(rt.MRC_VIEW_EVENT,e,i),e[rt.VIDEO_QUALITY_VIEW_EVENT].timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(t.durationMs*wt,Mt):Mt}(t)&&this.emitOnce(rt.VIDEO_QUALITY_VIEW_EVENT,e,i);var a=e[rt.SIX_SEC_VIEW_EVENT];a.timePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(t.durationMs*Rt,Lt):Lt}(t)&&a.visibilityWeightedTimePlayedMs>=function(t){return!t.isLive&&t.durationMs>0?Math.min(t.durationMs*kt,Ot):Ot}(t)&&this.emitOnce(rt.SIX_SEC_VIEW_EVENT,e,i)},e.checkPlayFromTap=function(t,e){e.isPlaying&&!e.isPreview&&(this.emitOnce(rt.PLAY_FROM_TAP_EVENT,t,e),this.emitOnce(rt.VIDEO_VIEW_EVENT,t,e))},e.emitOnce=function(t,e,i){e[t].fired||(this.analytics.emit(t,i),e[t].fired=!0)},t}(),Te=function(t){function e(e,i,n,a){var s;(s=t.call(this)||this).scribeListener=new se(p()(p()(s)),e,a),s.promotedLogListener=new Kt(p()(p()(s)),i),s.tentpoleListener=new le(p()(p()(s))),s.viewListener=new pe(p()(p()(s))),s.playbackLapseListener=new Ht(p()(p()(s))),s.errorListener=new pt(p()(p()(s))),s.beaconListener=new Et(p()(p()(s))),s.rewindListener=new Yt(p()(p()(s))),s.heartbeatListener=new yt(p()(p()(s))),s.loopListener=new gt(p()(p()(s))),s.intendToPlayListener=new mt(p()(p()(s))),s.videoSessionListener=new _e(p()(p()(s)));var r=new St(n,a),o=new Wt(r);return s.lifecycleListener=new Bt(p()(p()(s)),o),s}h()(e,t);var i=e.prototype;return i.onTickEvent=function(t){this.emit(rt.TICK_EVENT,t)},i.onReplay=function(t){var e=ut(t);void 0!==e&&(e.shouldLoop||this.emit(rt.REPLAY_EVENT,t))},i.onTrackFinished=function(t){this.emit(rt.TRACK_FINISHED_EVENT,t)},i.onIntendToPlay=function(t){this.emit(rt.INTEND_TO_PLAY_EVENT,t)},i.onPlay=function(t){this.emit(rt.PLAY_EVENT,t)},i.onPause=function(t){this.emit(rt.PAUSE_EVENT,t)},i.onMute=function(t){this.emit(rt.MUTE_EVENT,t)},i.onUnmute=function(t){this.emit(rt.UNMUTE_EVENT,t)},i.onFullScreen=function(t){this.emit(rt.FULL_SCREEN_EVENT,t)},i.onShrink=function(t){this.emit(rt.SHRINK_EVENT,t)},i.onAdSkip=function(t){this.emit(rt.AD_SKIP_EVENT,t)},i.onCtaImpression=function(t){this.emit(rt.CTA_IMPRESSION_EVENT,t)},i.onCtaClick=function(t){this.emit(rt.CTA_CLICK_EVENT,t)},i.onConfigLoaded=function(t){this.emit(rt.CONFIG_LOADED_EVENT,t)},i.onError=function(t,e){this.emit(rt.ERROR_EVENT,t,e)},i.onTeardown=function(t){this.emit(rt.TEARDOWN_EVENT,t)},e}(nt.a),ve=i("fc63"),ye=i.n(ve),fe=i("9zie"),me=i("8jsb"),ge=i("gw7+"),Pe=i("wKG5"),Ie=i.n(Pe),Ve=(i("sh+k"),i("/Znk")),be=i.n(Ve),Ae=function(t){function e(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,v()(p()(p()(e)),"_handlePlacementChange",function(t){e._updateAndNotify({placement:t},e.props.onChange)}),v()(p()(p()(e)),"_handleObstructionChange",function(){var t=e.props,i=t.obstructionDetection,n=t.onChange;e._updateAndNotify({obstructions:i.getObstructions()},n)}),v()(p()(p()(e)),"_setPlacementRef",function(t){var i=e.props.setAPI;e._placementRef=t,i(e._placementRef?{sample:function(t){return e.sample(t)}}:void 0)}),e}h()(e,t);var i=e.prototype;return i.sample=function(t){var e=this;this._placementRef&&this._placementRef.sample(function(i){e._updateAndNotify({placement:i},t)})},i.render=function(){var t=this.props,e=t.children,i=t.style;return y.createElement(ge.a,{onPlacementChange:this._handlePlacementChange,ref:this._setPlacementRef,style:i},e)},i.componentDidMount=function(){var t=this.props.obstructionDetection;this._obstructionSubscription=t.subscribe(this._handleObstructionChange)},i.componentWillUnmount=function(){this._obstructionSubscription&&(this._obstructionSubscription.unsubscribe(),this._obstructionSubscription=void 0)},i._updateAndNotify=function(t,e){var i=this,n=t.placement,a=t.obstructions,s=this.props,r=s.layerId,o=s.obstructionDetection;this._placement=n||this._placement,this._obstructions=a||this._obstructions||o.getObstructions(),this._placement?e(new J(this._placement,this._obstructions,r)):this._placementRef&&this._placementRef.sample(function(t){i._placement=t,i._obstructions=i._obstructions||o.getObstructions(),e(new J(t,i._obstructions,r))})},e}(y.Component);v()(Ae,"defaultProps",{obstructionDetection:Ie.a});var Ne=be()(Ae),Se=7e3,Ce=6e4,Me=R.a.j0d798e1,we=new x.a({}),Le=function(t){function e(e,i){var n;return n=t.call(this,e,i)||this,v()(p()(p()(n)),"_emitter",null),v()(p()(p()(n)),"_playerInternal",null),v()(p()(p()(n)),"_placementRef",null),v()(p()(p()(n)),"_isLooping",!1),v()(p()(p()(n)),"_setPlayerApi",function(t){var e=n.props,i=e.onMuteChange;"function"==typeof e.customOverlay&&(n._playerInternal=t,n.forceUpdate()),i&&(t.on("unmute",function(){return i({isPlayerMuted:!1})}),t.on("mute",function(){return i({isPlayerMuted:!0})})),t&&(t.on("fullscreenEntered",function(){return n._handleFullscreenChange({isPlayerFullscreen:!0})}),t.on("fullscreenExited",function(){return n._handleFullscreenChange({isPlayerFullscreen:!1})})),n._setPlayerInternal(t)}),v()(p()(p()(n)),"_deriveCustomOverlay",function(){var t=n.props.customOverlay;return"function"==typeof t?n._playerInternal?t(n._playerInternal):null:t}),v()(p()(p()(n)),"_getLoopingThreshold",function(){var t=n.props,e=t.loopingThresholdMs,i=t.source.videoId;return e||"tweet"===i.type&&Ce||Se}),v()(p()(p()(n)),"_handleAutoPlayRequest",function(){var t=n.props.onAutoplay;n._playerInternal&&(n._playerInternal.playPreview(),t&&t())}),v()(p()(p()(n)),"_handlePauseRequest",function(){var t=n.props.onAutopause;n._playerInternal&&(n._playerInternal.pause(),t&&t())}),v()(p()(p()(n)),"_handlePlacementChange",function(t){n._emitter&&n._emitter.signalPlacementChange(t),n._playerInternal&&n._playerInternal.updatePosition(t.getPositionData())}),v()(p()(p()(n)),"_handlePlaybackComplete",function(){n._emitter&&n._emitter.signalPlaybackFinish()}),v()(p()(p()(n)),"_handlePlaybackStarted",function(){n._emitter&&n._emitter.signalPlay(),n.props.onPlaybackStarted&&n.props.onPlaybackStarted()}),v()(p()(p()(n)),"_handlePlaybackPaused",function(){n._emitter&&n._emitter.signalPause()}),v()(p()(p()(n)),"_handleProgress",function(t){var e=n.props.onProgressChange,i=(t.tracks||[]).find(function(e){return e.id===t.currentTrackId});if(i){var a=(i.currentTimeMs||0)/i.durationMs;e&&e(a,t.tracksFinished)}}),v()(p()(p()(n)),"_handleError",function(t){var e=n.props.onError;t.error&&(e&&e(),n._onErrorUnsubscribe&&n._onErrorUnsubscribe())}),v()(p()(p()(n)),"_handleFullscreenChange",function(t){var e=n.context.viewport;if(e&&e.temporarilySuppressScrollListeners(2e3),$.a.isChrome())if(t.isPlayerFullscreen)n._savedScrollPosition={y:window.scrollY,x:window.scrollX};else if(n._savedScrollPosition){var i=n._savedScrollPosition,a=i.x,s=i.y;n._savedScrollPosition=void 0,window.scrollTo(a,s)}var r=n.props.onFullscreenChange;r&&r(t)}),v()(p()(p()(n)),"_setPlayerInternal",function(t){if(n._playerInternal=t,t&&(n.props.onProgressChange&&t.subscribe(n._handleProgress),n.props.onError&&(n._onErrorUnsubscribe=t.subscribe(n._handleError)),t.on("playbackComplete",n._handlePlaybackComplete),t.on("play",n._handlePlaybackStarted),t.on("pause",n._handlePlaybackPaused),n.props.playbackCoordination&&(n._emitter=n.props.playbackCoordination.register({onAutoPlayRequest:n._handleAutoPlayRequest,onPauseRequest:n._handlePauseRequest,canAutoplay:Object(Z.a)(n.props.autoplay),isLooping:n._isLooping})),n._submitInitialPlacement()),n.props.setPlayer){var e=n._playerInternal&&{play:function(){n._playerInternal&&n._playerInternal.play()},pause:function(){n._playerInternal&&n._playerInternal.pause()},replay:function(){n._playerInternal&&n._playerInternal.replay()}};n.props.setPlayer(e)}}),v()(p()(p()(n)),"_setPlacementAPI",function(t){n._placementRef=t,n._submitInitialPlacement()}),n._enableNativeFullscreen=w.a.isTrue("responsive_web_video_native_fullscreen_enabled"),n._disableHls=!($.a.isDesktopOS()||$.a.isAndroid()&&w.a.isTrue("web_video_hls_android_mse_enabled")),n._precacheEnabled=!$.a.isMobileOS()&&w.a.hasValue("responsive_web_video_precaching_8507","precaching"),n}h()(e,t);var i=e.prototype;return i.render=function(){var t=this.props.aspectRatio;return y.createElement(ye.a,{ratio:t,style:Re.aspectRatio},y.createElement(Ne,{onChange:this._handlePlacementChange,setAPI:this._setPlacementAPI,style:F.a.absoluteFill},this._renderPlayer()))},i.UNSAFE_componentWillReceiveProps=function(t){j()(this.props.source,t.source)||this._emitter&&this._emitter.reset()},i.componentWillUnmount=function(){this._emitter&&(this._emitter.unregister(),this._emitter=null),this._onErrorUnsubscribe&&this._onErrorUnsubscribe()},i._renderPlayer=function(){var t=this.props,e=t.analytics,i=t.source,n=i.contentId,a=i.eventId,s=i.variants,r=i.videoId,o=i.vmapUrl,c=t.cta,u=t.displayOptions,d=t.durationMs,_=t.forceLoop,h=t.intentToPlayTime,E=t.videoType,p=t.poster,T=t.promotedContent,v=t.videoEl,f=t.viewCount,m=t.includeBroadcastEventAssociation,g=t.showControls,P=t.geolocationPrompt,I=t.timecode,V=t.dataSaverMode,b=t.mediaAvailability,N=t.noAuthHttpClient,S=t.publisherId,C=t.twitterAuthedHttpClient,M=t.language,L=t.maxLoopCount,R="animated_gif"===E,O="vine"===E,k=s&&s.length?R?"gif":"media_entity":"vmap";this._isLooping=!!(_||R||O||d&&d<=this._getLoopingThreshold());var W={contentId:n,contentType:k,cta:c,displayOptions:u,durationMs:d,eventId:a,featureProvider:w.a,loop:this._isLooping,mediaAvailability:b,poster:p&&p.url,publisherId:S,variants:s&&Object(A.c)(Object(fe.c)(s,V?fe.a.MEDIUM:fe.a.HIGH).map(function(t){return{src:t.url,type:t.content_type}})),viewCount:f,vmapUrl:o},F=T&&(T.impression_id||T.disclosure_type)?{impressionId:T.impression_id,disclosureType:T.disclosure_type}:void 0,B=V?D.a.MEDIUM:void 0,H=this.props.videoPlayer;return y.createElement(K,null,y.createElement(H,l()({analytics:e,bitrateCap:B,controls:g,customOverlay:this._deriveCustomOverlay(),disableHls:this._disableHls,enableNativeFullscreen:this._enableNativeFullscreen,geolocationPrompt:P,httpClient:N,includeBroadcastEventAssociation:m,initiallyMutedCaptions:!0,intentToPlayTime:h,language:M,maxLoopCount:L,precache:this._precacheEnabled,promotedContext:F,requestedTimecode:I,setPlayerApi:this._setPlayerApi,shortNumberFormatter:Me,twitterAuthedHttpClient:C,videoEl:v,videoId:r},W)))},i._submitInitialPlacement=function(){this._emitter&&this._placementRef&&this._placementRef.sample(this._handlePlacementChange)},e}(y.Component);v()(Le,"contextTypes",{viewport:O.object}),v()(Le,"defaultProps",{autoplay:k.b.Off,playbackCoordination:me.b,showControls:!0,dataSaverMode:!1,geolocationPrompt:!0,noAuthHttpClient:we,includeBroadcastEventAssociation:!1});var Re=F.a.create({aspectRatio:{zIndex:void 0}}),Oe=i("T09O"),ke=i("uMse"),De=i.n(ke);i.d(e,"InlinePlayerContainer",function(){return We});var We=function(t){function e(e){var i;return i=t.call(this,e)||this,v()(p()(p()(i)),"_player",null),v()(p()(p()(i)),"_getBaseItem",function(t){var e,n=i.props,a=n.includeBroadcastEventAssociation,s=n.scribeData.event_id,r=n.source.videoId;return e="broadcast"===r.type&&r.tweetId?r.tweetId:"broadcast"===r.type&&a&&s?s:r.id,t.find(function(t){return t.id===e})}),v()(p()(p()(i)),"_createAnalytics",function(t){var e={log:i._scribeAction},n=i.props.scribeData,a={log:w.a.isTrue("responsive_web_video_promoted_logging_enabled")?i._logPromotedVideoEvent:De.a},s=i.props.scribeNamespace,r=Array.isArray(n.items)?i._getBaseItem(n.items):void 0,o={scribeContext:Object.assign({},s),baseScribeItem:r};return new Te(e,a,t,o)}),v()(p()(p()(i)),"_logPromotedVideoEvent",function(t){i.props.logPromotedVideoEvent(t)}),v()(p()(p()(i)),"_scribeAction",function(t){var e=t.category,n=t.data,a=t.namespace,s=i.props,r=s.scribeAction,o=s.scribeNamespace;r(Object(Oe.a)(o,a),Object.assign({},n,{_category_:e}))}),v()(p()(p()(i)),"_setPlayer",function(t){if(i._player=t,i.props.setPlayer){var e=i._player&&{play:function(){i._player&&i._player.play()},pause:function(){i._player&&i._player.pause()},replay:function(){i._player&&i._player.replay()}};i.props.setPlayer(e)}}),i._twitterAuthedHttpClient=e.getTwitterAuthedHttpClient(),i._analytics=i._createAnalytics(i._twitterAuthedHttpClient),i}return h()(e,t),e.prototype.render=function(){var t=this.props,e=(t.getTwitterAuthedHttpClient,d()(t,["getTwitterAuthedHttpClient"]));return y.createElement(Le,l()({},e,{analytics:this._analytics,setPlayer:this._setPlayer,twitterAuthedHttpClient:this._twitterAuthedHttpClient}))},e}(y.PureComponent);e.default=Object(M.b)()(C(We))},"8jsb":function(t,e,i){"use strict";i.d(e,"a",function(){return v}),i.d(e,"b",function(){return y});var n=i("fx22"),a=(i.n(n),i("QBuC")),s=(i.n(a),i("WpTh")),r=(i.n(s),i("fKPv")),o=i.n(r),c=i("VTn2"),l=(i.n(c),i("dpp3")),u=i.n(l),d=i("G2rC"),_=i.n(d),h=i("OCyo"),E=i.n(h),p=.25,T=Object.freeze({INITIAL:"initial",AUTO_PAUSED:"autoPaused",USER_PAUSED:"userPaused",AUTO_PLAYING:"autoPlaying",USER_PLAYING:"userPlaying",FINISHED:"finished"}),v=function(){function t(t){var e=this;void 0===t&&(t=p),o()(this,"_players",[]),o()(this,"_setPlayerState",function(t,e){t.previousPlaybackState=t.playbackState,t.playbackState=e}),o()(this,"_updatePlaybackStates",function(){var t=e._players.find(function(t){return t.playbackState===T.USER_PLAYING});t&&!e._canPlay(t)?(e._pausePlayer(t),e._triggerAutoplay()):t?e._stopAllExcept(t):e._triggerAutoplay()}),o()(this,"_scheduleUpdate",E()(u()(this._updatePlaybackStates,window.requestIdleCallback?function(t){return window.requestIdleCallback(t,{timeout:200})}:window.requestAnimationFrame),300,{leading:!1,trailing:!0})),this._minimumVisibilityForAutoplay=t}var e=t.prototype;return e.register=function(t){var e=this,i=t.canAutoplay,n=t.onAutoPlayRequest,a=t.onPauseRequest,s=t.isLooping,r={placement:void 0,playbackState:T.INITIAL,previousPlaybackState:T.INITIAL,commandHandlers:{onAutoPlayRequest:n,onPauseRequest:a},canAutoplay:i,isLooping:s};return this._players.push(r),{reset:function(){return e._handleReset(r)},signalPlacementChange:function(t){return e._handlePlacementChange(r,t)},signalPlay:function(){return e._handlePlay(r)},signalPause:function(){return e._handlePause(r)},signalPlaybackFinish:function(){return e._handlePlaybackFinished(r)},unregister:function(){return e._handleUnregister(r)}}},e._handlePlacementChange=function(t,e){t.placement=e,t.playbackState===T.FINISHED&&0===e.visibleFraction()&&this._setPlayerState(t,T.INITIAL),this._scheduleUpdate()},e._handlePlay=function(t){t.playbackState!==T.AUTO_PLAYING&&(t.previousPlaybackState===T.AUTO_PLAYING&&t.isLooping?this._setPlayerState(t,T.AUTO_PLAYING):this._setPlayerState(t,T.USER_PLAYING)),this._stopAllExcept(t)},e._handlePause=function(t){t.playbackState!==T.AUTO_PAUSED&&this._setPlayerState(t,T.USER_PAUSED)},e._handlePlaybackFinished=function(t){this._setPlayerState(t,T.FINISHED)},e._handleReset=function(t){this._setPlayerState(t,T.INITIAL),this._scheduleUpdate()},e._handleUnregister=function(t){var e=this._players.indexOf(t);e>=0&&this._players.splice(e,1),this._scheduleUpdate()},e._triggerAutoplay=function(){var t=this,e=this._players.filter(function(e){return t._canAutoPlay(e)}),i=_()(e,function(t){return t.placement?t.placement.distanceToCenter():Number.MAX_VALUE});i?(this._stopAllExcept(i),this._autoPlayVideo(i)):this._players.forEach(function(e){e.playbackState===T.AUTO_PLAYING&&t._pausePlayer(e)})},e._canAutoPlay=function(t){var e=!!t.placement&&t.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,i=t.playbackState===T.USER_PAUSED,n=t.playbackState===T.FINISHED;return t.canAutoplay&&e&&!i&&!n},e._canPlay=function(t){var e=!!t.placement&&t.placement.visibleFraction()>=this._minimumVisibilityForAutoplay,i=!!t.placement&&t.placement.visibleFraction()>0;return!t.placement||i||e},e._stopAllExcept=function(t){var e=this;this._players.forEach(function(i){i===t||i.playbackState!==T.USER_PLAYING&&i.playbackState!==T.AUTO_PLAYING||e._pausePlayer(i)})},e._pausePlayer=function(t){var e=t.commandHandlers.onPauseRequest;this._setPlayerState(t,T.AUTO_PAUSED),e()},e._autoPlayVideo=function(t){var e=t.commandHandlers.onAutoPlayRequest;this._setPlayerState(t,T.AUTO_PLAYING),e()},t}(),y=new v},G2rC:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;e.default=function(t,e){if(0!==t.length){for(var i=t[0],n=e(i),a=1;a<t.length;a++){var s=t[a],r=e(s);r<n&&(i=s,n=r)}return i}}},RKnr:function(t,e,i){var n=i("tfF3"),a=i("XsgD"),s=a;s.v1=n,s.v4=a,t.exports=s},WiIn:function(t,e,i){var n=i("Ds5P");n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},XsgD:function(t,e,i){var n=i("e9dj"),a=i("2h9/");t.exports=function(t,e,i){var s=e&&i||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var r=(t=t||{}).random||(t.rng||n)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e)for(var o=0;o<16;++o)e[s+o]=r[o];return e||a(r)}},e9dj:function(t,e){var i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(i){var n=new Uint8Array(16);t.exports=function(){return i(n),n}}else{var a=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),a[e]=t>>>((3&e)<<3)&255;return a}}},tfF3:function(t,e,i){var n,a,s=i("e9dj"),r=i("2h9/"),o=0,c=0;t.exports=function(t,e,i){var l=e&&i||0,u=e||[],d=(t=t||{}).node||n,_=void 0!==t.clockseq?t.clockseq:a;if(null==d||null==_){var h=s();null==d&&(d=n=[1|h[0],h[1],h[2],h[3],h[4],h[5]]),null==_&&(_=a=16383&(h[6]<<8|h[7]))}var E=void 0!==t.msecs?t.msecs:(new Date).getTime(),p=void 0!==t.nsecs?t.nsecs:c+1,T=E-o+(p-c)/1e4;if(T<0&&void 0===t.clockseq&&(_=_+1&16383),(T<0||E>o)&&void 0===t.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");o=E,c=p,a=_;var v=(1e4*(268435455&(E+=122192928e5))+p)%4294967296;u[l++]=v>>>24&255,u[l++]=v>>>16&255,u[l++]=v>>>8&255,u[l++]=255&v;var y=E/4294967296*1e4&268435455;u[l++]=y>>>8&255,u[l++]=255&y,u[l++]=y>>>24&15|16,u[l++]=y>>>16&255,u[l++]=_>>>8|128,u[l++]=255&_;for(var f=0;f<6;++f)u[l+f]=d[f];return e||r(u)}}});
//# sourceMappingURL=https://ton.smf1.twitter.com/responsive-web-internal/sourcemaps/web/ondemand.InlinePlayer.29df1b711158f4d34.js.map